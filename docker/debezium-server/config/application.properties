# Debezium Server Configuration for Cassandra CDC to Kafka
# Documentation: https://debezium.io/documentation/reference/stable/operations/debezium-server.html
# Architecture: Standalone service that monitors Cassandra CDC and publishes to Kafka

# ============================================================================
# Sink Configuration - Kafka
# ============================================================================
debezium.sink.type=kafka
debezium.sink.kafka.producer.bootstrap.servers=kafka:9092
debezium.sink.kafka.producer.key.serializer=org.apache.kafka.common.serialization.StringSerializer
debezium.sink.kafka.producer.value.serializer=org.apache.kafka.common.serialization.StringSerializer
debezium.sink.kafka.producer.acks=1
debezium.sink.kafka.producer.retries=3

# ============================================================================
# Source Configuration - Cassandra 4 Connector
# ============================================================================
debezium.source.connector.class=io.debezium.connector.cassandra.Cassandra4Connector

# Unique node identifier for this Debezium Server instance
debezium.source.cassandra.node.id=debezium-server-1

# Cassandra connection settings
debezium.source.cassandra.hosts=cassandra
debezium.source.cassandra.port=9042

# CDC commit log settings
debezium.source.commit.log.relocation.dir=/debezium/cassandra/cdc_raw
debezium.source.commit.log.real.time.processing.enabled=true
debezium.source.commit.marked.complete.poll.interval.ms=1000

# Topic naming - creates topics like: cdc-events.warehouse.users
debezium.source.topic.prefix=cdc-events

# Table filtering - only monitor these tables
debezium.source.table.include.list=warehouse.users,warehouse.orders,warehouse.sessions

# Snapshot configuration
debezium.source.snapshot.mode=initial
debezium.source.snapshot.consistency=ONE

# Offset storage (file-based for Debezium Server)
debezium.source.offset.storage.file.filename=/debezium/offsets/cassandra-offset.dat
debezium.source.offset.flush.interval.ms=60000

# Schema change handling
debezium.source.schema.change.enabled=true

# Performance tuning
debezium.source.max.batch.size=2048
debezium.source.max.queue.size=8192
debezium.source.poll.interval.ms=1000

# Error handling
debezium.source.errors.max.retries=10
debezium.source.errors.retry.delay.ms=3000

# HTTP monitoring endpoint
debezium.source.http.port=8000

# ============================================================================
# Serialization Format
# ============================================================================
debezium.format.key=json
debezium.format.value=json

# ============================================================================
# Logging
# ============================================================================
quarkus.log.level=INFO
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
